<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="https://github.com/alex-anie/ClouldflareGPT/blob/main/src/assets/clouldflare.png?raw=true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CloudflareGPT - Cloudflare AI Challenge</title>
    <meta name="description" content="Cloudflare AI Challenge">
    <meta name="keywords" content="Workers AI, Open Models, Text Generation, Speech Recognition">
    <meta name="author" content="Alex Anie">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">

    <style>
      *, *::after, *::before {
        font-family: var(--quicksand);
        margin: 0;
        padding: 0;
      }

      img {
        width: 100%;
      }

      :root {
          --quicksand: "Quicksand", sans-serif;

          /* Colors */
          --bg-sidebar: #171717;
          --bg-main: #212121;
          --fainted-gray: #9b9b9b;
      }

      /* Main */
      .site {
        display: flex;
      }

      /* Sidebar */
      .sidebar {
        display: none;
        background-color: var(--bg-sidebar);
        width: 18em;
        height: 100vh;
        color: white;
        position: relative;
      }

      @media (min-width: 768px) {
        .sidebar {
          display: block;
        }
      }

      .sidebar-container {
        width: 90%;
        margin: 1em auto;
      }

      .new-chat-logo div {
        width: 30px;
        height: 30px;
        background-color: white;
        border-radius: 100px;
        padding: 4px;
      }

      .sidebar nav {
        display: flex;
        justify-content: space-between;
        background-color: var(--bg-sidebar);
        width: 90%;
        position: absolute;
        top: 1em;
        border-radius: 10px;
        -webkit-user-select: none;
        user-select: none;
        cursor: pointer;
      }

      .sidebar .new-chat-logo {
          display: flex;
          justify-content: space-between;
          cursor: pointer;
          border-radius: 10px;
          padding: 6px;
      }

      .sidebar nav:hover {
        background-color: rgba(255,255,255, 0.2);
      }

      .new-chat-logo p {
        display: inline-block;
        transform: translate(10px, 10px);
      }

      .new-chat-icon div svg {
        display: inline-block;
        transform: translate(-10px, 14px);
      }

  /* History */
  .history {
    margin-top: 5em;
    height: 24em;

    overflow-y: auto;
  }

  .cus-scrollbar::-webkit-scrollbar {
  width: 1em;
  height: 1em;
}

.cus-scrollbar::-webkit-scrollbar-track {
  background: white;
  border-radius: 100vw;
  margin-block: 0.5em;
}

.cus-scrollbar::-webkit-scrollbar-thumb {
  background: var(--bg-main);
  border: 0.25em solid rgb(240, 147, 7);
  border-radius: 100vw;
}

.cus-scrollbar::-webkit-scrollbar-thumb:hover {
  background: hsl(120, 22%, 83%);
}


.history ul li {
    font-size: 12px;
    padding: 4px;
    margin: 4px;
    cursor: pointer;
    border-radius: 10px;
    list-style-type: none;
  }

  .history ul li:hover{
    background-color: rgba(255, 255, 255, 0.2);
  }

  .bottom-info {
    position: absolute;
    bottom: 0;
    padding: 4px;
    background-color: var(--bg-sidebar);
    width: 90%;
  }

  .bottom-info .Upgrade-plan {
    padding: 2px 3px;
    border-radius: 10px;
    -webkit-user-select: none;
    user-select: none;
  }

  .bottom-info .Upgrade-plan:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }

  .bottom-info a {
    display: flex;
    gap: 0.75rem;
    text-decoration: none;
    color: white;
    padding: 4px;
  }

  .bottom-info a div:first-child {
    width: 30px;
    height: 30px;
    border: 1px solid white;
    border-radius: 100px;
    padding: 2px;
  }

  .bottom-info a div svg {
    display: block;
    padding: 4px;
  }

  .bottom-info a div:last-child {
    transform: translateY(-2px);
  }

  .bottom-info a div:last-child p:first-child {
    font-size: 14px;
  }

  .bottom-info a div:last-child p:last-child {
    font-size: 11px;
    color: var(--fainted-gray);
  }

  .bottom-info .user-profile {
    padding: 4px;
    border-radius: 10px;
    -webkit-user-select: none;
    user-select: none;
  }

  .bottom-info .user-profile:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }

  .bottom-info .user-profile a {
    display: flex;
    gap: 0.75rem ;
    text-decoration: none;
    color: white;
  }

  .bottom-info .user-profile a div {
    width: 30px;
    height: 30px;
  }

  .bottom-info .user-profile a div img {
      width: 100%;
      border-radius: 100px;
  }

  .bottom-info .user-profile a div p {
    transform: translateY(-5px);
  }

    </style>
  </head>
  <body>
    <main class="site">

      <!-- Sidebar -->
      <aside class="sidebar">
        <section class="sidebar-container">
          <header>
            <nav>
              <div class="new-chat-logo">
                <div>
                  <img src="https://github.com/alex-anie/ClouldflareGPT/blob/main/src/assets/clouldflare.png?raw=true" alt="">
                </div>
                <p>New Chat</p>
              </div>

              <div class="new-chat-icon">
                  <div>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="icon-md"><path fillRule="evenodd" clipRule="evenodd" d="M16.7929 2.79289C18.0118 1.57394 19.9882 1.57394 21.2071 2.79289C22.4261 4.01184 22.4261 5.98815 21.2071 7.20711L12.7071 15.7071C12.5196 15.8946 12.2652 16 12 16H9C8.44772 16 8 15.5523 8 15V12C8 11.7348 8.10536 11.4804 8.29289 11.2929L16.7929 2.79289ZM19.7929 4.20711C19.355 3.7692 18.645 3.7692 18.2071 4.2071L10 12.4142V14H11.5858L19.7929 5.79289C20.2308 5.35499 20.2308 4.64501 19.7929 4.20711ZM6 5C5.44772 5 5 5.44771 5 6V18C5 18.5523 5.44772 19 6 19H18C18.5523 19 19 18.5523 19 18V14C19 13.4477 19.4477 13 20 13C20.5523 13 21 13.4477 21 14V18C21 19.6569 19.6569 21 18 21H6C4.34315 21 3 19.6569 3 18V6C3 4.34314 4.34315 3 6 3H10C10.5523 3 11 3.44771 11 4C11 4.55228 10.5523 5 10 5H6Z" fill="currentColor"></path></svg>
                  </div>
              </div>

            </nav>

            <!-- History -->
            <div class="history cus-scrollbar">
              <ul>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
                <li>history one</li>
              </ul>
            </div>

            <!-- Upgrade plan and User profile  -->
            <div class="bottom-info">
                <div class="Upgrade-plan">
                    <a href='https://developers.cloudflare.com/workers-ai/models/llama-2-7b-chat-fp16/' target="_black" class="">
                        <div class="">
                            <!-- SVG -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24" className="icon-sm shrink-0"><path fill="currentColor" d="M6.394 4.444c.188-.592 1.024-.592 1.212 0C8.4 8.9 9.1 9.6 13.556 10.394c.592.188.592 1.024 0 1.212C9.1 12.4 8.4 13.1 7.606 17.556c-.188.592-1.024.592-1.212 0C5.6 13.1 4.9 12.4.444 11.606c-.592-.188-.592-1.024 0-1.212C4.9 9.6 5.6 8.9 6.394 4.444m8.716 9.841a.41.41 0 0 1 .78 0c.51 2.865.96 3.315 3.825 3.826.38.12.38.658 0 .778-2.865.511-3.315.961-3.826 3.826a.408.408 0 0 1-.778 0c-.511-2.865-.961-3.315-3.826-3.826a.408.408 0 0 1 0-.778c2.865-.511 3.315-.961 3.826-3.826Zm2.457-12.968a.454.454 0 0 1 .866 0C19 4.5 19.5 5 22.683 5.567a.454.454 0 0 1 0 .866C19.5 7 19 7.5 18.433 10.683a.454.454 0 0 1-.866 0C17 7.5 16.5 7 13.317 6.433a.454.454 0 0 1 0-.866C16.5 5 17 4.5 17.567 1.317"></path></svg>
                        </div>
                        <div class="">
                            <p class="">Upgrade plan</p>
                            <p class="">Workers AI, Llama, and more </p>
                        </div>
                      </a>
                </div>

                <div class="user-profile">
                    <a href="https://dev.to/alexanie_" target="_blank" className="flex gap-3">
                        <div class="">
                            <img src="https://user-images.githubusercontent.com/78242022/242978218-d0e4eba2-62f7-4464-b2fb-c89835b6e592.jpg" alt="" class=""/>
                        </div>
                        <p>Alex Anie</p>
                    </a>
                </div>
            </div>
          </header>
        </section>
      </aside>

      <!-- Main Content -->
      <article>
        <section>
          <h1>CloudflareGPT</h1>
    
           <!-- Content -->
           <div id="response">
            
           </div>
    
              <!-- Input section -->
              <section>
                <form id="mydata">
                  <input 
                    autofocus
                    name="query"
                    placeholder="Ask CloudflareGPT any questions" 
                    type="text" 
                  >
                  </input>
                  <button type="submit">Ask</button>
                </form>
               </section>
        </section>
      </article>
    </main>

    <script>
      const returnResponse = async (formEvent) => {
        formEvent.preventDefault()

        document.querySelector("div#response").innerHTML = ''

        const url = `/stream?query=${formEvent.target.query.value}`
        const source = new EventSource(url)
        source.onmessage = (event) => {
          if (event.data === "[DONE]") {
            source.close()
            formEvent.target.query.value = ""
            return
          }
          const data = JSON.parse(event.data)
          document.querySelector("div#response").innerHTML += data.response
        }
      }

      document.querySelector("#mydata").addEventListener("submit", returnResponse)
    </script>
  </body>
</html>